var player,playerStats,timerProgress,obj={volume:0},done=!1;function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:"360",width:"640",videoId:$("#player").attr("rel"),playerVars:{autoplay:0,controls:1,showinfo:1,rel:0,iv_load_policy:3,cc_load_policy:0,fs:0,disablekb:1},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}),playerStats=new YT.Player("player-stats",{height:"360",width:"640",videoId:$("#player-stats").attr("rel"),playerVars:{autoplay:0,controls:1,showinfo:1,rel:0,iv_load_policy:3,cc_load_policy:0,fs:0,disablekb:1}})}function progressB(e){clearInterval(timerProgress),e?(timerProgress=setInterval(progressTween,100),gsap.to(".video-container",{duration:.3,y:"-10%",scale:1.1}),gsap.to("#nav",{duration:.3,autoAlpha:0}),gsap.to("#temp-sub-nav",{duration:.3,autoAlpha:0}),gsap.to("#shadow-video",{duration:.3,autoAlpha:0}),gsap.to("#shadow-video",{duration:.3,autoAlpha:0}),gsap.to("#layer-bg-video",{duration:.3,autoAlpha:1}),gsap.to(obj,{duration:.5,delay:1,volume:100,onUpdate:function(){player.setVolume(obj.volume)}})):(gsap.to("#nav",{duration:.3,autoAlpha:1}),gsap.to(".video-container",{duration:.3,scale:1,y:"0%"}),gsap.to("#layer-bg-video",{duration:.3,autoAlpha:0}),gsap.to("#temp-sub-nav",{duration:.3,autoAlpha:1}),gsap.to("#shadow-video",{duration:.3,autoAlpha:1}),gsap.to(obj,{duration:.3,delay:.1,volume:0,onUpdate:function(){player.setVolume(obj.volume)},onComplete:function(){player.pauseVideo()}}))}function progressTween(){total=player.getDuration(),time=player.getCurrentTime(),playerTimeDifference=time/total*1,gsap.to($("#progressBar div"),{duration:.2,scaleX:playerTimeDifference})}function onPlayerReady(e){e=e.target.getVideoEmbedCode();document.getElementById("player")&&(document.getElementById("player").innerHTML=e),gsap.to("#player",{ease:"linear",scrollTrigger:{trigger:"#player",start:"top center",end:"bottom center",scrub:1,onEnter:e=>{progressB(!0)},onEnterBack:e=>{progressB(!0)},onLeaveBack:e=>{progressB(!1)},onLeave:e=>{progressB(!1)}}})}function onPlayerStateChange(e){e.data===YT.PlayerState.ENDED&&player.playVideo()}function stopVideo(){player.stopVideo()}$(document).ready(function(){var e=document.createElement("script"),a=(e.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0]);a.parentNode.insertBefore(e,a)});